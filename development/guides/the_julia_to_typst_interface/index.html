<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The Julia to Typst Interface · Typstry.jl</title><meta name="title" content="The Julia to Typst Interface · Typstry.jl"/><meta property="og:title" content="The Julia to Typst Interface · Typstry.jl"/><meta property="twitter:title" content="The Julia to Typst Interface · Typstry.jl"/><meta name="description" content="Documentation for Typstry.jl."/><meta property="og:description" content="Documentation for Typstry.jl."/><meta property="twitter:description" content="Documentation for Typstry.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Typstry.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Typstry.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Typstry.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/getting_started/">Getting Started</a></li></ul></li><li><span class="tocitem">Guides</span><ul><li><a class="tocitem" href="../typst_formatting_examples/">Typst Formatting Examples</a></li><li class="is-active"><a class="tocitem" href>The Julia to Typst Interface</a><ul class="internal"><li><a class="tocitem" href="#Setup"><span>Setup</span></a></li><li><a class="tocitem" href="#Implementation"><span>Implementation</span></a></li><li><a class="tocitem" href="#Guidelines"><span>Guidelines</span></a></li></ul></li><li><a class="tocitem" href="../package_interoperability/">Package Interoperability</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../../references/commands/">Commands</a></li><li><a class="tocitem" href="../../references/contexts/">Contexts</a></li><li><a class="tocitem" href="../../references/strings/">Strings</a></li><li><a class="tocitem" href="../../references/render/">Render</a></li><li><a class="tocitem" href="../../references/package_extensions/">Package Extensions</a></li><li><a class="tocitem" href="../../references/internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guides</a></li><li class="is-active"><a href>The Julia to Typst Interface</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The Julia to Typst Interface</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jakobjpeters/Typstry.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jakobjpeters/Typstry.jl/blob/main/docs/source/guides/the_julia_to_typst_interface.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="The-Julia-to-Typst-Interface"><a class="docs-heading-anchor" href="#The-Julia-to-Typst-Interface">The Julia to Typst Interface</a><a id="The-Julia-to-Typst-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#The-Julia-to-Typst-Interface" title="Permalink"></a></h1><p>This guide illustrates how to implement Typst formatting for custom types.</p><h2 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h2><pre><code class="language-julia-repl hljs">julia&gt; import Base: show

julia&gt; import Typstry: TypstContext, show_typst

julia&gt; using Typstry</code></pre><h2 id="Implementation"><a class="docs-heading-anchor" href="#Implementation">Implementation</a><a id="Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation" title="Permalink"></a></h2><p>Consider this custom type.</p><pre><code class="language-julia-repl hljs">julia&gt; struct Hi end</code></pre><p>Implement a <a href="../../references/strings/#Typstry.show_typst"><code>show_typst</code></a> method to specify its Typst formatting. Remember to <a href="https://docs.julialang.org/en/v1/manual/performance-tips/#Annotate-values-taken-from-untyped-locations">Annotate values taken from untyped locations</a>.</p><pre><code class="language-julia-repl hljs">julia&gt; show_typst(io::IO, tc::TypstContext, ::Hi) = print(
           io, &quot;Hi&quot;, &#39;!&#39; ^ tc[:excitement]::Int
       );</code></pre><p>Although custom formatting may be handled in <code>show_typst</code> with <code>get(::TypstContext, ::Symbol, default)</code>, this may be repetitive when specifying defaults for multiple methods. There is also no way to tell if the value has been specified by the user or if it is a default. Instead, implement a custom <a href="../../references/contexts/#Typstry.TypstContext"><code>TypstContext</code></a> which overrides default, but not user specifications.</p><pre><code class="language-julia-repl hljs">julia&gt; TypstContext(::Hi) = TypstContext(; excitement = 0);</code></pre><p>Those two methods are a complete implementation of the Julia to Typst interface. The following method is optional, but enables interoperability with packages that do not know about Typstry.jl.</p><pre><code class="language-julia-repl hljs">julia&gt; show(io::IO, m::Union{
           MIME&quot;application/pdf&quot;,
           MIME&quot;image/png&quot;,
           MIME&quot;image/svg+xml&quot;,
           MIME&quot;text/typst&quot;
       }, h::Hi) = show(io, m, Typst(h));</code></pre><p>Now, <code>Hi</code> is fully supported by Typstry.jl and implements the <code>show</code> interface.</p><pre><code class="language-julia-repl hljs">julia&gt; h = Hi();

julia&gt; show_typst(h)
Hi

julia&gt; TypstString(h; excitement = 1)
typst&quot;Hi!&quot;

julia&gt; typst&quot;\(h; excitement = 2)&quot;
typst&quot;Hi!!&quot;

julia&gt; show(IOContext(stdout, TypstContext(; excitement = 3)), &quot;text/typst&quot;, h)
Hi!!!</code></pre><h2 id="Guidelines"><a class="docs-heading-anchor" href="#Guidelines">Guidelines</a><a id="Guidelines-1"></a><a class="docs-heading-anchor-permalink" href="#Guidelines" title="Permalink"></a></h2><p>While implementing the interface only requires two methods, it may be more challenging to determine how a Julia value should be represented in a Typst source file and its corresponding compiled document. Julia and Typst are distinct languages that differ in both syntax and semantics, so there may be multiple meaningful formats to choose from.</p><h3 id="Make-the-obvious-choice,-if-available"><a class="docs-heading-anchor" href="#Make-the-obvious-choice,-if-available">Make the obvious choice, if available</a><a id="Make-the-obvious-choice,-if-available-1"></a><a class="docs-heading-anchor-permalink" href="#Make-the-obvious-choice,-if-available" title="Permalink"></a></h3><ul><li>There is a clear correspondence between these Julia and Typst values</li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst(1)
$1$

julia&gt; show_typst(nothing)
#none

julia&gt; show_typst(r&quot;[a-z]&quot;)
#regex(&quot;[a-z]&quot;)</code></pre><h3 id="Consider-both-the-Typst-source-text-and-compiled-document-formatting"><a class="docs-heading-anchor" href="#Consider-both-the-Typst-source-text-and-compiled-document-formatting">Consider both the Typst source text and compiled document formatting</a><a id="Consider-both-the-Typst-source-text-and-compiled-document-formatting-1"></a><a class="docs-heading-anchor-permalink" href="#Consider-both-the-Typst-source-text-and-compiled-document-formatting" title="Permalink"></a></h3><ul><li>A <code>Docs.Text</code> is documented to &quot;render [its value] as plain text&quot;, and therefore corresponds to text in a rendered Typst document</li><li>A <code>TypstString</code> represents Typst source text, and is printed directly</li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst(text&quot;[\&quot;a\&quot;]&quot;)
#&quot;[\&quot;a\&quot;]&quot;

julia&gt; show_typst(typst&quot;[\&quot;a\&quot;]&quot;)
[&quot;a&quot;]</code></pre><h3 id="Try-to-generate-valid-Typst-source-text"><a class="docs-heading-anchor" href="#Try-to-generate-valid-Typst-source-text">Try to generate valid Typst source text</a><a id="Try-to-generate-valid-Typst-source-text-1"></a><a class="docs-heading-anchor-permalink" href="#Try-to-generate-valid-Typst-source-text" title="Permalink"></a></h3><ul><li>A <code>TypstString</code> represents Typst source text, which may be invalid</li><li>A <code>UnitRange{Int}</code> is formatted differently for each <code>Mode</code>, but is always valid</li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst(1:4)
#range(1, 5)

julia&gt; show_typst(1:4; mode = code)
range(1, 5)</code></pre><h3 id="Test-for-edge-cases"><a class="docs-heading-anchor" href="#Test-for-edge-cases">Test for edge cases</a><a id="Test-for-edge-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Test-for-edge-cases" title="Permalink"></a></h3><ul><li><code>$1 / 2$</code> is not ambiguous in <code>markup</code> mode</li><li><code>1 / 2</code> may be ambiguous in <code>math</code> mode expressions, and should be parenthesized</li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst(1 // 2)
$1 / 2$

julia&gt; show_typst(1 // 2; mode = math)
(1 / 2)</code></pre><h3 id="Format-values-in-containers-using-show_typst"><a class="docs-heading-anchor" href="#Format-values-in-containers-using-show_typst">Format values in containers using <code>show_typst</code></a><a id="Format-values-in-containers-using-show_typst-1"></a><a class="docs-heading-anchor-permalink" href="#Format-values-in-containers-using-show_typst" title="Permalink"></a></h3><ul><li>Values may require their <code>TypstContext</code></li><li>The <code>AbstractVector</code> method<ul><li>Encloses source text in dollar signs, so it changes its <code>Mode</code> to <code>math</code></li><li>Formats its elements with an indent, so it increments its <code>depth</code></li></ul></li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst([true, Any[1, 1.2]])
$vec(
  #true, vec(
    1, 1.2
  )
)$</code></pre><h3 id="Check-parametric-and-abstract-types"><a class="docs-heading-anchor" href="#Check-parametric-and-abstract-types">Check parametric and abstract types</a><a id="Check-parametric-and-abstract-types-1"></a><a class="docs-heading-anchor-permalink" href="#Check-parametric-and-abstract-types" title="Permalink"></a></h3><ul><li>Similar Julia types may not be representable in the same Typst format</li></ul><pre><code class="language-julia-repl hljs">julia&gt; show_typst(0:2:6)
#range(0, 7, step: 2)

julia&gt; show_typst(0:2.0:6)
$vec(
  0.0, 2.0, 4.0, 6.0
)$</code></pre><h3 id="Prefer-to-perform-computation-in-Julia,-rather-than-Typst-code-mode"><a class="docs-heading-anchor" href="#Prefer-to-perform-computation-in-Julia,-rather-than-Typst-code-mode">Prefer to perform computation in Julia, rather than Typst code mode</a><a id="Prefer-to-perform-computation-in-Julia,-rather-than-Typst-code-mode-1"></a><a class="docs-heading-anchor-permalink" href="#Prefer-to-perform-computation-in-Julia,-rather-than-Typst-code-mode" title="Permalink"></a></h3><h3 id="Choose-the-most-semantically-rich-representation"><a class="docs-heading-anchor" href="#Choose-the-most-semantically-rich-representation">Choose the most semantically rich representation</a><a id="Choose-the-most-semantically-rich-representation-1"></a><a class="docs-heading-anchor-permalink" href="#Choose-the-most-semantically-rich-representation" title="Permalink"></a></h3><h3 id="Each-method-of-show_typst-should-correspond-to-the-same-rendering-in-a-compiled-document"><a class="docs-heading-anchor" href="#Each-method-of-show_typst-should-correspond-to-the-same-rendering-in-a-compiled-document">Each method of <code>show_typst</code> should correspond to the same rendering in a compiled document</a><a id="Each-method-of-show_typst-should-correspond-to-the-same-rendering-in-a-compiled-document-1"></a><a class="docs-heading-anchor-permalink" href="#Each-method-of-show_typst-should-correspond-to-the-same-rendering-in-a-compiled-document" title="Permalink"></a></h3></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../typst_formatting_examples/">« Typst Formatting Examples</a><a class="docs-footer-nextpage" href="../package_interoperability/">Package Interoperability »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 4 September 2025 03:34">Thursday 4 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
